# **Library**

## الترجمة الحرفية  
**Software Library** — **مكتبة برمجية**

## الوصف العربي المختصر  
حزمة **دوال/أنواع** جاهزة لإعادة الاستخدام.  
**أنت** تستدعيها وقت ما تشاء. لا تفرض عليك دورة حياة التطبيق. لا يوجد **Inversion of Control** من طرفها.

## الشرح المبسّط  
- المكتبة = **وظائف مركّزة** (JSON، صور، HTTP، رياضيات…).  
- تركّبها عبر **Package Manager** (مثل NuGet) ثم **تستدعي واجهاتها** (APIs).  
- لا تدير التطبيق، ولا تُملِي هيكل المشروع (بعكس الإطار Framework).  
- جودة المكتبة تُقاس: **واجهة واضحة**، **توثيق**، **اختبارات**، **صيانة**، **ترخيص قانوني**.

## تشبيه  
**عدّة أدوات** في حقيبة العامل. تختار المطرقة أو المفك عند الحاجة.  
الأدوات **لا تُدير الورشة**؛ أنت تديرها.

---

## مثال كود C# بسيط (استخدام مكتبة خارجية: Newtonsoft.Json)

> التثبيت (مرّة واحدة):  
> ```bash
> dotnet add package Newtonsoft.Json
> ```

```csharp
using System;
using Newtonsoft.Json; // مكتبة طرف ثالث — أنت تستدعيها

class Program
{
    record User(string Name, int Age);

    static void Main()
    {
        var u = new User("Sara", 28);

        // 1) استدعاء وظيفة من المكتبة: Serialize
        string json = JsonConvert.SerializeObject(u);
        Console.WriteLine(json); // {"Name":"Sara","Age":28}

        // 2) Deserialize
        var u2 = JsonConvert.DeserializeObject<User>(json);
        Console.WriteLine($"{u2!.Name} - {u2.Age}");

        // 3) إعدادات اختيارية — ما زلت أنت من يقرر
        var settings = new JsonSerializerSettings { Formatting = Formatting.Indented };
        Console.WriteLine(JsonConvert.SerializeObject(u, settings));
    }
}
```

**الفكرة:** المكتبة تقدّم **وظائف**. **أنت** من يقرّر متى وكيف تستعملها، وضمن أيّ معماريّة.

---

## خطوات عملية لاختيار واستخدام مكتبة
1. **احسب الحاجة**: ما المشكلة التي ستحلّها المكتبة؟ هل .NET يوفّر بديلًا مدمجًا؟  
2. **قيّم الجودة**: الاستمرارية، عدد التنزيلات، تحديثات حديثة، قضايا مفتوحة، ترخيص (MIT/Apache2…).  
3. **ثبّت عبر NuGet** وحدّد **نسخة** (Pin) أو نطاق SemVer واضح.  
4. **لفّ الاستخدام** خلف **واجهة داخلية** (Adapter) لتسهيل الاستبدال لاحقًا.  
5. **سجّل التبعيات** في وثائق المشروع، وراقب **الثغرات الأمنية** (Dependabot/Snyk).  
6. **اختبر** السيناريوهات الأساسية وحدود الأداء، وأعد التهيئة أو الاستبدال عند الحاجة.

---

## أخطاء شائعة
- الخلط بين **Library** و**Framework**: الاعتماد على المكتبة كأنها تدير التطبيق.  
- تجاهل **الترخيص** أو القيود القانونية.  
- ربط الكود **بواجهات المكتبة مباشرةً** في كل مكان بدل طبقة **Abstraction**.  
- عدم تثبيت **نسخة محددة** → تحديثات مفاجئة تكسر الكود.  
- استيراد مكتبات ثقيلة لحلّ مهمة بسيطة يمكن تنفيذها بكود صغير.

---

## جدول مقارنة مختصر

| المفهوم                   | الغرض الرئيسي                | ملاحظات مهمة                                        |
| ------------------------- | ---------------------------- | --------------------------------------------------- |
| **Library**               | **دوال/أنواع تستدعيها أنت**  | **لا تدير التطبيق؛ تُستخدم عبر APIs**                |
| [Framework](framework.md) | هيكل تشغيل يستدعي كودك (IoC) | يفرض دورة حياة/قواعد ومكوّنات (Routing/DI…)          |
| [SDK](sdk.md)             | أدوات + مكتبات + قوالب       | يشمل CLI/نماذج/توثيق للتطوير على منصّة               |
| [API](api.md)             | عقد تواصل/استدعاء            | قد تكون محليّة (Library API) أو عبر الشبكة (Web API) |

---

## ملخص الفكرة  
**المكتبة** = وظيفة جاهزة تضيفها لتسريع عملك.  
استدعها عند الحاجة، أثبت نسختها، لفّها بواجهة داخلية، وتأكد من الجودة والترخيص—وبذلك تبقى شيفرتك نظيفة وقابلة للصيانة.
