# **Isolated**

## الترجمة الحرفية  
**Isolated** — **مُعزول** (منفصل بحدود واضحة عن بقية المكوّنات/البيئات).

## الوصف العربي المختصر  
تصميم أو تشغيل مكوّن داخل **حدود مستقلة** لتقليل التأثير المتبادل ورفع **الأمان** و**الاستقرار** و**سهولة الاختبار**.  
قد تكون العزلة على مستوى **العملية (Process)** أو **الحاوية (Container)** أو **الشبكة** أو حتى **وحدة الاختبار**.

## الشرح المبسّط  
- نفصل كل جزء في “غرفة” خاصة به: إذا تعطل لا يجرّ معه الباقي.  
- نحدّ من الصلاحيات والموارد التي يراها كل جزء.  
- نمنع التداخل في الحالة المشتركة (Shared State) لتجنّب الأخطاء العنيدة.  
- نُسهل الاختبار لأن كل جزء يُختبر منفردًا.

## تشبيه  
فكّر في **مختبرات** داخل مبنى: كل مختبر له أدواته وموادّه وأبوابه.  
لو حدث تسريب في مختبر، لا ينتشر لباقي المبنى لأن **العزل** يمنع ذلك.

## مثال كود C# بسيط (عزل وحدة الخدمة عن قاعدة البيانات عبر تزوير الاعتماد)
```csharp
using System;
using System.Collections.Generic;

// واجهة لمصدر البيانات (نُعزل الخدمة عن DB الحقيقي)
public interface IOrdersRepo
{
    IEnumerable<string> GetPendingOrders();
}

// تنفيذ مزيف للاختبار (Isolated/Fake) لا يتصل بقاعدة بيانات
public sealed class FakeOrdersRepo : IOrdersRepo
{
    public IEnumerable<string> GetPendingOrders() => new[] { "ORD-1", "ORD-2" };
}

// خدمة تعتمد على الواجهة فقط (Dependency Inversion = عزل)
public sealed class OrdersService
{
    private readonly IOrdersRepo _repo;
    public OrdersService(IOrdersRepo repo) => _repo = repo;

    public int CountPending() => System.Linq.Enumerable.Count(_repo.GetPendingOrders());
}

public class Program
{
    public static void Main()
    {
        // اختبار معزول: نمرّر Fake بدل Repo حقيقي
        IOrdersRepo fake = new FakeOrdersRepo();
        var svc = new OrdersService(fake);

        Console.WriteLine(svc.CountPending()); // 2 ← يعمل بدون أي DB
    }
}
```
الإخراج المتوقع:  
- طباعة العدد `2` دون أي اتصال خارجي.  
- يمكن لاحقًا استبدال `FakeOrdersRepo` بـ `SqlOrdersRepo` في الإنتاج دون تغيير الخدمة.

## خطوات عملية لتطبيق العزل
- حدّد **الحدود**: عملية/حاوية/شبكة/وحدة اختبار/مساحة تخزين.  
- استخدم **واجهات + حقن اعتماد (DI)** لعزل المنطق عن التفاصيل.  
- للفصل القوي: **حاويات/VMs**، صلاحيات أقل (**Least Privilege**)، وحدات ملفات/شبكات منفصلة.  
- تجنّب **الحالة المشتركة**؛ استخدم رسائل/أحداث أو قواعد بيانات بمعاملات واضحة.  
- افصل **التهيئة والأسرار** عن الكود (ملفات إعداد/مخازن أسرار).  
- أضف **اختبارات معزولة** (وحدات/تكامل) وCI يعمل في بيئات نظيفة.

## جدول مقارنة مختصر

| المفهوم | الغرض الرئيسي | ملاحظات مهمة |
|---|---|---|
| [Sandboxed](sandboxed.md) | تشغيل ضمن قيود أمنية صارمة | حدود مُنفَّذة بسياسات ونظام؛ أقل حرية وأكثر أمانًا |
| **Isolated** | **فصل المكوّنات لتقليل التداخل** | **حدود واضحة (Process/Container/Network/Test)** |
| [Shared Environment](shared-environment.md) | مشاركة الموارد بين مكونات متعددة | مخاطر تأثير متبادل وتسرب حالة وجوانب أمنية أضعف |

## ملخص الفكرة  
**Isolated** يعني تشغيل أو تصميم مكوّن داخل حدود مفصولة تقلّل المخاطر وتُسهّل الاختبار والصيانة.  
العزل القوي يبدأ بواجهات وDI، ويتعزّز بالحاويات/الشبكات/الصلاحيات، وينتهي بنُهج اختبار نظيفة.
