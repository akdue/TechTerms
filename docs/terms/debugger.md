# **Debugger**

## الترجمة الحرفية  
**Debugger** — **مصحِّح** (أداة تنفيذ خطوة بخطوة لفحص حالة البرنامج).

## الوصف العربي المختصر  
أداة تسمح لك **بتوقيف** البرنامج في أي سطر، **تفحّص المتغيّرات**، **تتبّع المكدّس (Call Stack)**،  
والسير **سطرًا بسطر** لاكتشاف الأخطاء المنطقية وسلوك الكود وقت التشغيل.

## الشرح المبسّط  
- تضع **نقطة توقّف (Breakpoint)** في سطر معيّن؛ عند الوصول يتوقّف التنفيذ.  
- ترى **القيم الحيّة** للمتغيّرات وتعدّلها إن لزم.  
- تمشي **داخل الدالة** (Step Into) أو **تتجاوزها** (Step Over) أو **تخرج منها** (Step Out).  
- تضيف **شرطًا** للنقطة (i == 3) أو توقفًا عند **استثناء** معيّن.  
- تسجّل رسائل **بدون Console** عبر **Tracepoint/Logpoint**.

## تشبيه  
مثل **كاميرا بطيئة** في مباراة: توقف اللقطة عند اللحظة المناسبة،  
تكبّر الصورة لترى من لمس الكرة، ثم تكمل اللعب.

## مثال كود C# بسيط لاستخدام المصحّح
```csharp
// جرّب: ضع Breakpoint على السطر الذي يستدعي SumSquares، ثم استخدم F10/F11 للتقدّم.
// F9: تفعيل/إلغاء نقطة التوقف | F5: تشغيل مع التصحيح | F10: Step Over | F11: Step Into
using System;

class Program
{
    static void Main()
    {
        int n = 5;
        int total = SumSquares(n); // ← ضع نقطة توقّف هنا (Breakpoint)
        Console.WriteLine($"Total = {total}");
    }

    static int SumSquares(int n)
    {
        int total = 0;
        for (int i = 1; i <= n; i++) // راقب i و total في نافذة Watch
        {
            total += i * i;

            // مثال "شرط التوقف": اجعل الـ Breakpoint يتوقّف فقط عندما i == 3
            // في VS/VS Code: انقر يمين على النقطة وأضف Condition: i == 3
        }

        return total;
    }
}
```
الإخراج المتوقع عند التشغيل العادي:  
`Total = 55` (أي 1²+2²+3²+4²+5²).  
أثناء التصحيح سترى تغيّر المتغيّرات وتتحكّم بالتنقّل سطرًا بسطر.

## خطوات عملية لاستخدام Debugger بفعالية
- فعّل **Breakpoint** على الأسطر المشتبه بها؛ ثم حوّل بعضها إلى **Conditional** لتقليل الإيقاف الضوضائي.  
- استخدم **Watch/Locals/Autos** لمراقبة القيم، و**Immediate** لتجريب تعبيرات صغيرة.  
- راقب **Call Stack** لفهم سلسلة الاستدعاءات التي قادت للسطر الحالي.  
- جرّب **Exception Breakpoints** (توقّف عند رمي NullReferenceException مثلًا).  
- بدّل بعض النقاط إلى **Tracepoints/Logpoints** لطباعة رسالة بدون إيقاف التتنفيذ.  
- التقط **Dump** أو استعمل **Attach to Process** لمشكلات تحدث فقط في بيئة معيّنة.  
- بعد الإصلاح، أضِف **اختبارًا** يمنع عودة الخطأ.

## أخطاء شائعة
- الاعتماد على الـ **Console.WriteLine** فقط بدل استعمال المصحّح بقدراته الكاملة.  
- نسيان إلغاء **Breakpoints** أو تركها دون شروط في حلقات كبيرة → إبطاء التنفيذ.  
- تجاهل **Call Stack** والاعتماد على التخمين بدلاً من تتبّع مسار الاستدعاءات.

## جدول مقارنة مختصر

| المفهوم | الغرض الرئيسي | ملاحظات مهمة |
|---|---|---|
| [Code Editor](code-editor.md) | تحرير نص الكود فقط | خفيف؛ قد يحتاج إضافة Debugger أو تشغيل خارجي |
| **Debugger** | **تنفيذ خطوة بخطوة وفحص الحالة** | **نقاط توقّف/Watch/Call Stack/شروط/استثناءات/Logpoints** |
| [IDE](ide.md) | تحرير + بناء + تصحيح + إدارة مشروع | يتضمّن مصحّحًا مدمجًا عادةً وتكامل أدوات واسع |

## ملخص الفكرة  
**Debugger** هو عدستك المكبّرة داخل الكود: يوقف الزمن، ويُريك ما يحدث فعلًا.  
استخدمه بذكاء عبر نقاط توقف مشروطة، مراقبة متغيّرات، وتتبع المكدّس لتصل إلى أصل المشكلة بسرعة.
